import { Head, Image } from 'mdx-deck'
import { Container, Row, Col } from 'react-grid-system'
import HeadContents from '../../components/HeadContents.js'
import Top from '../../components/Top.js'
import ExLink from '../../components/ExLink.js'
import SandBox from './components/SandBox'
import packageJson from './package.json'
import ogImage from './assets/images/og.png'

export { default as theme } from '@mdx-deck/themes/base'

<Head>
  <HeadContents
    title={packageJson.slideTitle}
    urlPath={packageJson.slideKey}
    image={ogImage}
  />
</Head>

<Top title={packageJson.slideTitle} eventName="WeJS #31" hashtag="WeJS" />

---

## ä»Šæ—¥è©±ã™ã“ã¨

---

- Partial
- Required
- Pick
- Readonly
- Record
- Exclude
- Extract
- NonNullable
- ReturnType
- InstanceType
- ThisType

---

## å¤šã„

---

## 5 åˆ†

---

## ã¯ã˜ã‚ã¾ã™

---

## Partial

---

<SandBox
  initial={`// Partial<T>\n
type Customer = { id: string, name: string, age: number }
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
const c1: Customer = { id: '123', name: 'å¤ªéƒ' }
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
const c2: Partial<Customer> = { id: '123', name: 'å¤ªéƒ' }
`}
/>

---

## Required

---

<SandBox
  initial={`// Required<T>\n
type Customer = { id: string, name: string, age: number }
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
const c1: Customer = { id: '123', name: 'å¤ªéƒ' }
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
const c2: Partial<Customer> = { id: '123', name: 'å¤ªéƒ' }
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
const c3: Required<Partial<Customer>> = { id: '123', name: 'å¤ªéƒ' }
`}
/>

---

## Pick

---

<SandBox
  initial={`// Pick<T,K>\n
type Customer = { id: string, name: string, age: number }
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
const c1: Customer = { id: '123', name: 'å¤ªéƒ' }
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
const c2: Pick<Customer,'id'|'name'> = { id: '123', name: 'å¤ªéƒ' }
`}
/>

---

## Readonly

---

<SandBox
  initial={`// Readonly<T>\n
type Customer = { id: string, name: string, age: number }
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
const c1: Customer = { id: '123', name: 'å¤ªéƒ', age: 28 }
c1.age = 29
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
const c2: Readonly<Customer> = { id: '123', name: 'å¤ªéƒ', age: 28 }
c2.age = 29
`}
/>

---

## Record

---

<SandBox
  initial={`// Record<K,T>\n
type Color = 'red' | 'green' | 'blue'
\n// ã“ã†ã ã£ãŸã®ãŒ
type ColorCodes1 = { [key in Color]: string }
\n// ã“ã†æ›¸ã‘ã‚‹
type ColorCodes2 = Record<Color, string>
\nconst colorCodes: ColorCodes2 = {
  red: '#ff0000',
  green: '#00ff00',
  blue: '#0000ff',
  yellow: '#ffff00'
}
`}
/>

---

## Exclude

---

<SandBox
  initial={`// Exclude<T,U>\n
type Color = 'red' | 'green' | 'blue' | 'yellow' | 'purple'
\n// 3åŸè‰²ä»¥å¤–
type ColorWithoutRGB = Exclude<Color, 'red' | 'green' | 'blue'>
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
const color1: ColorWithoutRGB = 'red'
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
const color2: ColorWithoutRGB = 'yellow'
`}
/>

---

## Extract

---

<SandBox
  initial={`// Extract<T,U>\n
\n// å…‰ã®ä¸‰åŸè‰²
type ThreePrimaryLightColor = 'red' | 'green' | 'blue'
// è‰²ã®ä¸‰åŸè‰²
type ThreePrimaryColor = 'red' | 'blue' | 'yellow'
\n// å…±é€šé …
type CommonColor = Extract<ThreePrimaryLightColor, ThreePrimaryColor>
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
const color1: CommonColor = 'red'
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
const color2: CommonColor = 'yellow'
`}
/>

---

## NonNullable

---

<SandBox
  initial={`// NonNullable<T>\n
type Name = NonNullable<string | null | undefined>
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
const name1: Name = null
\n// ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
const name2: Name = 'å¤ªéƒ'
`}
/>

---

## ReturnType

---

<SandBox
  initial={`// ReturnType<T>\n
function toString(n: number) {
  return n.toString()
}
\n// æˆ»ã‚Šå€¤å‹ãŒå–ã‚Œã‚‹
type Ret = ReturnType<typeof toString>
\n// Connectã®å‹ã¨ã‹ã«ä½¿ãˆãã†(â†“ã¯é©å½“)
type Connect =
  <S, D>(mapStateToProps: S, mapDispatchToProps: D) =>
    (c: ComponentType<ReturnType<S> & ReturnType<D>>) => JSX
`}
/>

---

## InstanceType

---

<SandBox
  initial={`// InstanceType<T>\n
class Customer {
  private id: string
  private name: string
  private age?: number
  constructor(id: string, name: string, age?: number) {
    this.id = id
    this.name = name
    this.age = age
  }
}
const taro: InstanceType<typeof Customer> = new Customer('123', 'å¤ªéƒ')
`}
/>

---

ä½•ã«ã¤ã‹ã†ã‚“ã ã‚ã€‚ã€‚ã€‚ã€‚

---

ã‚ã‹ã‚‰ã‚“ ğŸ˜‡

---

## ThisType

---

<SandBox
  initial={`// ThisType<T>
// tsã®å…¬å¼ã‹ã‚‰ãƒ‘ã‚¯ã£ã¦ããŸ\n
type ObjectDescriptor<D, M> = {
  data?: D;
  methods?: M & ThisType<D & M>;  // Type of 'this' in methods is D & M
}\n
function makeObject<D, M>(desc: ObjectDescriptor<D, M>): D & M {
  let data: object = desc.data || {};
  let methods: object = desc.methods || {};
  return { ...data, ...methods } as D & M;
}\n
let obj = makeObject({
  data: { x: 0, y: 0 },
  methods: {
    moveBy(dx: number, dy: number) {
      this.x += dx; // Strongly typed this
      this.y += dy; // Strongly typed this
    }
  }
});\n
obj.x = 10;
obj.y = 20;
obj.moveBy(5, 5);
\n// command + enter ã§å®Ÿè¡Œã§ãã‚‹
alert(JSON.stringify(obj))
`}
/>

---

ä½•ã«ã¤ã‹ã†ã‚“ã ã‚ã€‚ã€‚ã€‚ã€‚

---

Vue ã§ã“ã‚“ãªæ„Ÿã˜ã® API è¦‹ãŸã“ã¨ã‚ã‚“ãª ğŸ¤”

---

<SandBox
  initial={`// ThisType<T>
\n// vueã®å…¬å¼ã‹ã‚‰ãƒ‘ã‚¯ã£ã¦ããŸ
// ã“ã®ã‚³ãƒ¼ãƒ‰ã§thisã‚’ã¯ã‚ã¦ã¿ã‚ˆã†ï¼
const vueue = {
  data: { a: 1 },
  computed: {
    aDouble: function () {
      return this.a \* 2
    }
  }
}\n
// type Vueue<D, M> = {
//   data: D
//   computed: M & ThisType<D & M>
// }
// function makeVueue<D, M>(vueue: Vueue<D, M>): D & M {
//   return { ...vueue.data, ...vueue.computed } as D & M;
// }\n
`}
/>

---

<ExLink href="https://www.typescriptlang.org/docs/handbook/utility-types.html">
  tsã®builtin typeã¯ã“ã“ã«è¼‰ã£ã¦ã‚‹
</ExLink>

---

<img
  src="https://i.gyazo.com/87d23d84bc93c83bb165c9d2f239f703.png"
  width="275"
/>

- <ExLink href="https://cureapp.co.jp">CureApp</ExLink>
- ã‚¢ãƒ—ãƒªã§åŒ»ç™‚æ©Ÿå™¨ã‚’ä½œã£ã¦ã‚‹
- TS, react, RN, Node.js, MongoDB

---

## ãŠã‚ã‚Šã€‚

---

ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼ï¼
