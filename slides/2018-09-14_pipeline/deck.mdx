import { Head, Image } from 'mdx-deck'
import { CodeSurfer } from 'code-surfer'
import { Container, Row, Col } from 'react-grid-system'
import Top from '../../components/Top.js'
import SandBox from './components/SandBox'
import packageJson from './package.json'

export { default as theme } from '../../theme'

<Top
  title="Pipeline Operator Sandbox"
  image="https://i.gyazo.com/1a93c1f91e97a782243f5c4f06bf16e0.png"
  eventName="#WeJS @24th"
  urlPath={packageJson.urlPath}
/>

---

# è‡ªå·±ç´¹ä»‹

---

<img
  src="https://i.gyazo.com/87d23d84bc93c83bb165c9d2f239f703.png"
  width="275"
/>

- CureApp
- ã‚¢ãƒ—ãƒªã§åŒ»ç™‚æ©Ÿå™¨ã‚’ä½œã£ã¦ã‚‹
- RN, react, Node.js, MongoDB

---

# TL;DR

---

# pipeline operator ğŸ˜ƒ ï¸

---

# pipeline operator is ä½• ??

---

# |>

---

## åƒ•ã€Œbabel ã§ pipeline operator ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã‚‰ã—ã„ã€‚ä½¿ã£ã¦ã¿ã‚ˆãƒ¼ã€

---

## <img src="https://i.gyazo.com/4e01b705fcc27cda558cf00a7ca98366.png" width="1440"/>

---

## <img src="https://i.gyazo.com/aced314e590318a584ffc0525d3ed4b4.png" width="700"/>

---

## <img src="https://i.gyazo.com/468349bbe821f898b01a8f5ecdc03c6c.png" width="800"/>

---

# æœªå¯¾å¿œ

---

# ä½œã‚ã†ï¼ï¼ï¼

---

### sandbox

<SandBox
  initial={`
({
  first:'pipe',
  second:'line',
  third:'!!!',
})
  |> Object.values
  |> (a => a.join(''))
  |> alert`}
/>

---

### [Proposed Solutions](https://babeljs.io/blog/2018/07/19/whats-happening-with-the-pipeline-proposal#proposed-solutions)

- Minimal (ã•ã£ãã®)
- F#-Style (Coming Soon!)
- Smart (Coming Soon!)

---

### fsharp

<div>
  <p style={{ fontSize: 20 }}>(å‹•ã‹ãªã„ã€‚ã€‚ã€‚)</p>
  <SandBox
    initial={`
Promise.resolve({
  first:'pipe',
  second:'line',
  third:'!!!',
})
  |> await         // <-
  |> Object.values
  |> (a => a.join(''))
  |> alert`}
  />
</div>

---

### smart

<div>
  <p style={{ fontSize: 20 }}>(å‹•ã‹ãªã„ã€‚ã€‚ã€‚)</p>
  <SandBox
    initial={`
({
  first:'pipe',
  second:'line',
  third:'!!!',
})
  |> await #       // <-
  |> Object.values
  |> #.join('')    // <- å…ƒ: (a => a.join(''))
  |> alert`}
  />
</div>

---

## map ã—ã¦ã¿ã‚‹

---

### map

<SandBox
  initial={`
[1, 2, 3]
  |> (a => a.map(n => n * 2))
  |> JSON.stringify
  |> alert`}
/>

---

### R.map

<SandBox
  initial={`
const { map } = R;
[1, 2, 3]
  |> map(n => n * 2) // <-
  |> JSON.stringify
  |> alert`}
/>

<!-- ```notes
ã¾ãŸã„ã¤ã‹ä½¿ã„ãŸã„
<CodeSurfer
  title='OOP ã¨ FP'
  code={require("!raw-loader!./assets/codes/oop_vs_fp.js")}
  showNumbers
  steps={[
    { ranges: [[1,11]], notes: 'OOPã ã¨ã“ã†ï¼Ÿ' },
    { ranges: [[14,22]], notes: 'FPã ã¨ã“ã†ï¼Ÿ' },
    { ranges: [[1,11]], notes: 'OOP' },
    { range: [2,8], notes: 'classå®šç¾©ã—ã¦' },
    { lines: [10], notes: 'ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œã£ã¦' },
    { lines: [11], notes: 'ä½¿ã†' },
    { ranges: [[14,22]], notes: 'FP' },
    { ranges: [[15,19]], notes: 'å‹ã¨é–¢æ•°ã‚’å®šç¾©ã—ã¦' },
    { lines: [21], notes: 'ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œã£ã¦' },
    { lines: [22], notes: 'ä½¿ã†' },
    { lines: [11,22], notes: 'ä½¿ã„å¿ƒåœ°' },
    { ranges: [[15,21]], notes: 'æ§‹é€ çš„éƒ¨åˆ†å‹' },
  ]}
```
/> -->

---

# [Ramda](https://ramdajs.com/)

---

##### (ã‚¿ã‚¤ãƒã˜ã‚ƒãªã„ã‚ˆã€‚ã€‚ã€‚)

---

<img
  src="https://i.gyazo.com/0fb75025d51989473b6823fd31da7906.png"
  width="207"
/>

---

## lodash ã¿ãŸã„ãªã‚‚ã®

- Immutability and side-effect free
- automatically curried
- convenience for currying

---

### ramda map

<SandBox initial={require('!raw-loader!./assets/codes/ramda_map.js')} />

---

### ramda map (curry)

<SandBox initial={require('!raw-loader!./assets/codes/ramda_map-curry.js')} />

---

### ramda lens

<SandBox initial={require('!raw-loader!./assets/codes/ramda_lens.js')} />

---

### ramda groupBy

<SandBox initial={require('!raw-loader!./assets/codes/ramda_groupBy.js')} />

---

### ramda sort

<SandBox initial={require('!raw-loader!./assets/codes/ramda_sort.js')} />

---

### ramda tap

<SandBox initial={require('!raw-loader!./assets/codes/ramda_tap.js')} />

---

pipe, pipeP, compose, composeP, curry, R.\_\_, cond, evolve, groupBy, juxt, lens, view, set, over, lensIndex, lensProp, lensPath, lift, mapObjIndexed, of, objOf, partial, pathSatisfies, range, scan, times, when, ...

---

# Ramda ğŸ˜ƒ ï¸

---

ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼ï¼

---

### sandbox(pipeline, optional-chaining)

<Container>
  <Row>
    <Col sm={12} md={8}>
      <SandBox
        initial={`// type your code...
// _  < 'lodash'
// fp < 'lodash/fp'
// R  < 'ramda'`}
      />
    </Col>
    <Col sm={12} md={4}>
      <p>
        <a href="https://lodash.com/docs/4.17.10">lodash docs</a>
      </p>
      <p>
        <a href="https://github.com/lodash/lodash/tree/4.17.10-npm/fp">
          lodash fp
        </a>
      </p>
      <p>
        <a href="https://ramdajs.com/docs/">ramda docs</a>
      </p>
    </Col>
  </Row>
</Container>
